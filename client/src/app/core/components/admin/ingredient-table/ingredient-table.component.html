<app-ingredient-add-form (updateIngredientTable)="loadIngredients()"></app-ingredient-add-form>

<div class="container">
    <div class="container__act-table">

        <div class="table__container" [style.display]="ingredients?.length === 0 ? 'none' : 'block'">
            <table mat-table [dataSource]="ingredients">

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"></th>
                    <td mat-cell *matCellDef="let ingredient">{{ingredient.name}}</td>
                </ng-container>
                <ng-container matColumnDef="name-rowspan">
                    <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Название</th>
                </ng-container>

                <ng-container matColumnDef="proteins">
                    <th mat-header-cell *matHeaderCellDef>Белки</th>
                    <td mat-cell *matCellDef="let ingredient">{{ingredient.proteins}}</td>
                </ng-container>

                <ng-container matColumnDef="fats">
                    <th mat-header-cell *matHeaderCellDef>Жиры</th>
                    <td mat-cell *matCellDef="let ingredient">{{ingredient.fats}}</td>
                </ng-container>

                <ng-container matColumnDef="carbohydrates">
                    <th mat-header-cell *matHeaderCellDef>Углеводы</th>
                    <td mat-cell *matCellDef="let ingredient">{{ingredient.carbohydrates}}</td>
                </ng-container>

                <ng-container matColumnDef="calories">
                    <th mat-header-cell *matHeaderCellDef>Калорийность</th>
                    <td mat-cell *matCellDef="let ingredient">{{ingredient.calories}}</td>
                </ng-container>

                <ng-container matColumnDef="header-row-second-group">
                    <th mat-header-cell *matHeaderCellDef [attr.colspan]="4">На 100 грамм/миллилитров</th>
                </ng-container>

                <ng-container matColumnDef="delete">
                    <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"></th>
                    <td mat-cell *matCellDef="let ingredient">
                        <button class="delete-button" (click)="deleteIngredient(ingredient)" mat-icon-button>
                            <mat-icon class="delete-icon">close</mat-icon>
                        </button>
                    </td>
                </ng-container>
                <ng-container matColumnDef="delete-rowspan">
                    <th mat-header-cell *matHeaderCellDef="let ingredient" [attr.rowspan]="2">Удалить</th>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="['name-rowspan', 'header-row-second-group',
                    'delete-rowspan']"></tr>
                <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayColumns;"></tr>

            </table>
        </div>

        <div class="paginator__container">
            <mat-paginator [pageSizeOptions]="[10, 25, 50]" aria-label="Выберите страницу"
                [pageIndex]="pagination?.currentPage" [pageSize]="pagination?.pageSize"
                [length]="pagination?.totalCount" [showFirstLastButtons]="true"
                (page)="pageEvent = handlePage($event)">
            </mat-paginator>
        </div>

    </div>
</div>